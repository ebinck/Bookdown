<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Correct Species Codes | Quantifying Sampled Wetlands on BLM Land</title>
  <meta name="description" content="This is an organized chronicle of the coding I have used for my research thus far.." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Correct Species Codes | Quantifying Sampled Wetlands on BLM Land" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an organized chronicle of the coding I have used for my research thus far.." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Correct Species Codes | Quantifying Sampled Wetlands on BLM Land" />
  
  <meta name="twitter:description" content="This is an organized chronicle of the coding I have used for my research thus far.." />
  

<meta name="author" content="Elin Binck" />


<meta name="date" content="2022-04-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="remove-duplicates.html"/>
<link rel="next" href="calculate-percent-cover-of-hydrophytic-species.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.0/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.0/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="remove-duplicates.html"><a href="remove-duplicates.html"><i class="fa fa-check"></i><b>2</b> Remove Duplicates</a><ul>
<li class="chapter" data-level="2.1" data-path="remove-duplicates.html"><a href="remove-duplicates.html#load-the-data"><i class="fa fa-check"></i><b>2.1</b> Load the data</a><ul>
<li class="chapter" data-level="2.1.1" data-path="remove-duplicates.html"><a href="remove-duplicates.html#join-lpi-with-corresponding-states"><i class="fa fa-check"></i><b>2.1.1</b> Join lpi with corresponding states</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="remove-duplicates.html"><a href="remove-duplicates.html#break-up-lpi_tall-to-investigate-duplicates"><i class="fa fa-check"></i><b>2.2</b> Break up lpi_tall to investigate duplicates</a></li>
<li class="chapter" data-level="2.3" data-path="remove-duplicates.html"><a href="remove-duplicates.html#create-objects-for-duplicates-for-each-state"><i class="fa fa-check"></i><b>2.3</b> Create objects for duplicates for each state</a></li>
<li class="chapter" data-level="2.4" data-path="remove-duplicates.html"><a href="remove-duplicates.html#remove-plots-with-duplicates"><i class="fa fa-check"></i><b>2.4</b> Remove plots with duplicates</a><ul>
<li class="chapter" data-level="2.4.1" data-path="remove-duplicates.html"><a href="remove-duplicates.html#create-a-df-with-all-the-primarykeys-from-each-dup-file-for-each-state"><i class="fa fa-check"></i><b>2.4.1</b> Create a df with all the PrimaryKeys from each dup file for each state</a></li>
<li class="chapter" data-level="2.4.2" data-path="remove-duplicates.html"><a href="remove-duplicates.html#remove-all-plots-that-have-any-duplicate-values"><i class="fa fa-check"></i><b>2.4.2</b> Remove all plots that have any duplicate values</a></li>
<li class="chapter" data-level="2.4.3" data-path="remove-duplicates.html"><a href="remove-duplicates.html#check-for-more-duplicates"><i class="fa fa-check"></i><b>2.4.3</b> Check for more duplicates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="correct-species-codes.html"><a href="correct-species-codes.html"><i class="fa fa-check"></i><b>3</b> Correct Species Codes</a><ul>
<li class="chapter" data-level="3.1" data-path="correct-species-codes.html"><a href="correct-species-codes.html#load-the-rest-of-the-data"><i class="fa fa-check"></i><b>3.1</b> Load the rest of the data</a></li>
<li class="chapter" data-level="3.2" data-path="correct-species-codes.html"><a href="correct-species-codes.html#join-lpi_tall2-with-other-species-lists"><i class="fa fa-check"></i><b>3.2</b> Join lpi_tall2 with other species lists</a><ul>
<li class="chapter" data-level="3.2.1" data-path="correct-species-codes.html"><a href="correct-species-codes.html#join-with-usda-plant-list"><i class="fa fa-check"></i><b>3.2.1</b> Join with USDA plant list</a></li>
<li class="chapter" data-level="3.2.2" data-path="correct-species-codes.html"><a href="correct-species-codes.html#join-with-statespecies"><i class="fa fa-check"></i><b>3.2.2</b> Join with StateSpecies</a></li>
<li class="chapter" data-level="3.2.3" data-path="correct-species-codes.html"><a href="correct-species-codes.html#join-with-usda-list-again"><i class="fa fa-check"></i><b>3.2.3</b> Join with USDA list again</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="calculate-percent-cover-of-hydrophytic-species.html"><a href="calculate-percent-cover-of-hydrophytic-species.html"><i class="fa fa-check"></i><b>4</b> Calculate Percent Cover of Hydrophytic Species</a><ul>
<li class="chapter" data-level="4.1" data-path="calculate-percent-cover-of-hydrophytic-species.html"><a href="calculate-percent-cover-of-hydrophytic-species.html#load-data"><i class="fa fa-check"></i><b>4.1</b> Load Data</a></li>
<li class="chapter" data-level="4.2" data-path="calculate-percent-cover-of-hydrophytic-species.html"><a href="calculate-percent-cover-of-hydrophytic-species.html#remove-soil-surface-codes-and-non-plant-codes"><i class="fa fa-check"></i><b>4.2</b> Remove Soil Surface Codes and non plant codes</a></li>
<li class="chapter" data-level="4.3" data-path="calculate-percent-cover-of-hydrophytic-species.html"><a href="calculate-percent-cover-of-hydrophytic-species.html#calculate-the-percent-relative-cover-of-each-species-for-each-transect"><i class="fa fa-check"></i><b>4.3</b> Calculate the percent relative cover of each species for each transect</a></li>
<li class="chapter" data-level="4.4" data-path="calculate-percent-cover-of-hydrophytic-species.html"><a href="calculate-percent-cover-of-hydrophytic-species.html#apply-wetland-indicator-statuses"><i class="fa fa-check"></i><b>4.4</b> Apply Wetland Indicator Statuses</a></li>
<li class="chapter" data-level="4.5" data-path="calculate-percent-cover-of-hydrophytic-species.html"><a href="calculate-percent-cover-of-hydrophytic-species.html#spatially-apply-the-wetland-indicator-regions"><i class="fa fa-check"></i><b>4.5</b> Spatially apply the wetland indicator regions</a><ul>
<li class="chapter" data-level="4.5.1" data-path="calculate-percent-cover-of-hydrophytic-species.html"><a href="calculate-percent-cover-of-hydrophytic-species.html#find-the-lrrs-of-every-primary-key"><i class="fa fa-check"></i><b>4.5.1</b> Find the LRRs of every Primary Key</a></li>
<li class="chapter" data-level="4.5.2" data-path="calculate-percent-cover-of-hydrophytic-species.html"><a href="calculate-percent-cover-of-hydrophytic-species.html#join-the-lrr-data-to-the-lpi-data"><i class="fa fa-check"></i><b>4.5.2</b> Join the LRR data to the LPI data</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="calculate-percent-cover-of-hydrophytic-species.html"><a href="calculate-percent-cover-of-hydrophytic-species.html#calculate-the-percent-hydrophytic-per-plot"><i class="fa fa-check"></i><b>4.6</b> Calculate the percent hydrophytic per plot</a></li>
<li class="chapter" data-level="4.7" data-path="calculate-percent-cover-of-hydrophytic-species.html"><a href="calculate-percent-cover-of-hydrophytic-species.html#reattach-the-spatial-info"><i class="fa fa-check"></i><b>4.7</b> Reattach the spatial info</a><ul>
<li class="chapter" data-level="4.7.1" data-path="calculate-percent-cover-of-hydrophytic-species.html"><a href="calculate-percent-cover-of-hydrophytic-species.html#reattach-the-lat-long-info-sourced-from-header"><i class="fa fa-check"></i><b>4.7.1</b> Reattach the lat long info sourced from header</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="surface-water.html"><a href="surface-water.html"><i class="fa fa-check"></i><b>5</b> Surface Water</a><ul>
<li class="chapter" data-level="5.1" data-path="surface-water.html"><a href="surface-water.html#load-the-lpi-data"><i class="fa fa-check"></i><b>5.1</b> Load the LPI data</a></li>
<li class="chapter" data-level="5.2" data-path="surface-water.html"><a href="surface-water.html#calculate-percent-surface-water"><i class="fa fa-check"></i><b>5.2</b> Calculate percent surface water</a></li>
<li class="chapter" data-level="5.3" data-path="surface-water.html"><a href="surface-water.html#join-this-data-with-the-data-of-25-to-50-hydrophytic-species"><i class="fa fa-check"></i><b>5.3</b> Join this data with the data of 25 to 50% hydrophytic species</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="final-sites-between-25-and-50-hydrophytic-plant-species.html"><a href="final-sites-between-25-and-50-hydrophytic-plant-species.html"><i class="fa fa-check"></i><b>6</b> Final sites between 25 and 50% hydrophytic plant species</a><ul>
<li class="chapter" data-level="6.1" data-path="final-sites-between-25-and-50-hydrophytic-plant-species.html"><a href="final-sites-between-25-and-50-hydrophytic-plant-species.html#load-the-data-1"><i class="fa fa-check"></i><b>6.1</b> Load the data</a></li>
<li class="chapter" data-level="6.2" data-path="final-sites-between-25-and-50-hydrophytic-plant-species.html"><a href="final-sites-between-25-and-50-hydrophytic-plant-species.html#combine-the-data"><i class="fa fa-check"></i><b>6.2</b> Combine the data</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="initial-analyses.html"><a href="initial-analyses.html"><i class="fa fa-check"></i><b>7</b> Initial Analyses</a><ul>
<li class="chapter" data-level="7.1" data-path="initial-analyses.html"><a href="initial-analyses.html#load-the-data-2"><i class="fa fa-check"></i><b>7.1</b> Load the data</a><ul>
<li class="chapter" data-level="7.1.1" data-path="initial-analyses.html"><a href="initial-analyses.html#wetland-aim-data"><i class="fa fa-check"></i><b>7.1.1</b> Wetland AIM data</a></li>
<li class="chapter" data-level="7.1.2" data-path="initial-analyses.html"><a href="initial-analyses.html#terrestrial-aim-data"><i class="fa fa-check"></i><b>7.1.2</b> Terrestrial AIM data</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="initial-analyses.html"><a href="initial-analyses.html#percent-hydrophytic"><i class="fa fa-check"></i><b>7.2</b> Percent Hydrophytic</a><ul>
<li class="chapter" data-level="7.2.1" data-path="initial-analyses.html"><a href="initial-analyses.html#terrestrial-wetlands-sites-with-wetland-aim-sites"><i class="fa fa-check"></i><b>7.2.1</b> Terrestrial “wetlands” sites with Wetland AIM sites</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="initial-analyses.html"><a href="initial-analyses.html#percent-nativenoxious"><i class="fa fa-check"></i><b>7.3</b> Percent Native/Noxious</a><ul>
<li class="chapter" data-level="7.3.1" data-path="initial-analyses.html"><a href="initial-analyses.html#calculate-relative-cover-for-terrestrial-wetlands"><i class="fa fa-check"></i><b>7.3.1</b> Calculate Relative cover for Terrestrial wetlands</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Quantifying Sampled Wetlands on BLM Land</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="correct-species-codes" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Correct Species Codes</h1>
<pre include="FALSE"><code>library(tidyverse)
library(tidyr)
library(readr)

knitr::opts_chunk$set(echo = TRUE)</code></pre>
<div id="load-the-rest-of-the-data" class="section level2">
<h2><span class="header-section-number">3.1</span> Load the rest of the data</h2>
<div id="lpi-data-dups-removed" class="section level4">
<h4><span class="header-section-number">3.1.0.1</span> LPI data (dups removed)</h4>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="correct-species-codes.html#cb20-1"></a>lpi_tall2&lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;/Users/elinbinck/Documents/Grad_School/Thesis/R_project/Thesis_Research/data/lpi_tall.DupsRemoved.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="state-species-list" class="section level4">
<h4><span class="header-section-number">3.1.0.2</span> State Species List</h4>
<p>This is the data that has the “correct” codes to replace incorrect ones.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="correct-species-codes.html#cb21-1"></a>StateSpecies&lt;-<span class="kw">read.csv</span>(<span class="st">&quot;/Users/elinbinck/Documents/Grad_School/Thesis/R_project/Thesis_Research/data/ExportedTerrestrial_Data/tblStateSpecies.csv&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb21-2"><a href="correct-species-codes.html#cb21-2"></a><span class="st">  </span><span class="kw">select</span>(SpeciesCode, </span>
<span id="cb21-3"><a href="correct-species-codes.html#cb21-3"></a>         ScientificName, </span>
<span id="cb21-4"><a href="correct-species-codes.html#cb21-4"></a>         UpdatedSpeciesCode, </span>
<span id="cb21-5"><a href="correct-species-codes.html#cb21-5"></a>         SpeciesState)</span>
<span id="cb21-6"><a href="correct-species-codes.html#cb21-6"></a></span>
<span id="cb21-7"><a href="correct-species-codes.html#cb21-7"></a><span class="co">#change some of the incorrectly formatted data</span></span>
<span id="cb21-8"><a href="correct-species-codes.html#cb21-8"></a></span>
<span id="cb21-9"><a href="correct-species-codes.html#cb21-9"></a>StateSpecies[<span class="st">&quot;SpeciesCode&quot;</span>][StateSpecies[<span class="st">&quot;SpeciesCode&quot;</span>] <span class="op">==</span><span class="st"> &quot;7-Feb&quot;</span>] &lt;-<span class="st"> &quot;FEBR7&quot;</span></span>
<span id="cb21-10"><a href="correct-species-codes.html#cb21-10"></a></span>
<span id="cb21-11"><a href="correct-species-codes.html#cb21-11"></a>StateSpecies[<span class="st">&quot;SpeciesCode&quot;</span>][StateSpecies[<span class="st">&quot;SpeciesCode&quot;</span>] <span class="op">==</span><span class="st"> &quot;2-Feb&quot;</span>] &lt;-<span class="st"> &quot;FEBR2&quot;</span></span>
<span id="cb21-12"><a href="correct-species-codes.html#cb21-12"></a></span>
<span id="cb21-13"><a href="correct-species-codes.html#cb21-13"></a>StateSpecies[<span class="st">&quot;SpeciesCode&quot;</span>][StateSpecies[<span class="st">&quot;SpeciesCode&quot;</span>] <span class="op">==</span><span class="st"> &quot;2-Mar&quot;</span>] &lt;-<span class="st"> &quot;MARCH2&quot;</span></span></code></pre></div>
</div>
<div id="wetland-aim-master-species-list" class="section level4">
<h4><span class="header-section-number">3.1.0.3</span> Wetland AIM Master Species List</h4>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="correct-species-codes.html#cb22-1"></a>WetAIMmasterlist &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;/Users/elinbinck/Documents/Grad_School/Thesis/R_project/Thesis_Research/data/WetIndicators/WetlandAIM_MasterSpeciesList.csv&quot;</span>)<span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb22-2"><a href="correct-species-codes.html#cb22-2"></a><span class="st">  </span><span class="kw">select</span>(Symbol, </span>
<span id="cb22-3"><a href="correct-species-codes.html#cb22-3"></a>         WMVC_WetStatus, </span>
<span id="cb22-4"><a href="correct-species-codes.html#cb22-4"></a>         AW_WetStatus, </span>
<span id="cb22-5"><a href="correct-species-codes.html#cb22-5"></a>         GP_WetStatus, </span>
<span id="cb22-6"><a href="correct-species-codes.html#cb22-6"></a>         Scientific.Name)</span></code></pre></div>
</div>
<div id="usda-plant-list" class="section level4">
<h4><span class="header-section-number">3.1.0.4</span> USDA plant list</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="correct-species-codes.html#cb23-1"></a>USDAlist &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;/Users/elinbinck/Documents/Grad_School/Thesis/R_project/Thesis_Research/data/WetIndicators/NationalPlantList.csv&quot;</span>)</span>
<span id="cb23-2"><a href="correct-species-codes.html#cb23-2"></a></span>
<span id="cb23-3"><a href="correct-species-codes.html#cb23-3"></a>USDAlist[<span class="st">&quot;Symbol&quot;</span>][USDAlist[<span class="st">&quot;Symbol&quot;</span>] <span class="op">==</span><span class="st"> &quot;7-Feb&quot;</span>] &lt;-<span class="st"> &quot;FEBR7&quot;</span></span>
<span id="cb23-4"><a href="correct-species-codes.html#cb23-4"></a></span>
<span id="cb23-5"><a href="correct-species-codes.html#cb23-5"></a>USDAlist[<span class="st">&quot;Symbol&quot;</span>][USDAlist[<span class="st">&quot;Symbol&quot;</span>] <span class="op">==</span><span class="st"> &quot;5-Feb&quot;</span>] &lt;-<span class="st"> &quot;FEBR5&quot;</span></span>
<span id="cb23-6"><a href="correct-species-codes.html#cb23-6"></a></span>
<span id="cb23-7"><a href="correct-species-codes.html#cb23-7"></a>USDAlist[<span class="st">&quot;Symbol&quot;</span>][USDAlist[<span class="st">&quot;Symbol&quot;</span>] <span class="op">==</span><span class="st"> &quot;2-Feb&quot;</span>] &lt;-<span class="st"> &quot;FEBR2&quot;</span></span>
<span id="cb23-8"><a href="correct-species-codes.html#cb23-8"></a></span>
<span id="cb23-9"><a href="correct-species-codes.html#cb23-9"></a>USDAlist[<span class="st">&quot;Symbol&quot;</span>][USDAlist[<span class="st">&quot;Symbol&quot;</span>] <span class="op">==</span><span class="st"> &quot;2-Mar&quot;</span>] &lt;-<span class="st"> &quot;MARCH2&quot;</span></span>
<span id="cb23-10"><a href="correct-species-codes.html#cb23-10"></a></span>
<span id="cb23-11"><a href="correct-species-codes.html#cb23-11"></a>USDAlist[<span class="st">&quot;Symbol&quot;</span>][USDAlist[<span class="st">&quot;Symbol&quot;</span>] <span class="op">==</span><span class="st"> &quot;Dec-70&quot;</span>] &lt;-<span class="st"> &quot;DECE70&quot;</span></span>
<span id="cb23-12"><a href="correct-species-codes.html#cb23-12"></a></span>
<span id="cb23-13"><a href="correct-species-codes.html#cb23-13"></a>USDAlist[<span class="st">&quot;Symbol&quot;</span>][USDAlist[<span class="st">&quot;Symbol&quot;</span>] <span class="op">==</span><span class="st"> &quot;5-Jun&quot;</span>] &lt;-<span class="st"> &quot;JUNE5&quot;</span></span>
<span id="cb23-14"><a href="correct-species-codes.html#cb23-14"></a></span>
<span id="cb23-15"><a href="correct-species-codes.html#cb23-15"></a>USDAlist[<span class="st">&quot;Symbol&quot;</span>][USDAlist[<span class="st">&quot;Symbol&quot;</span>] <span class="op">==</span><span class="st"> &quot;2-Nov&quot;</span>] &lt;-<span class="st"> &quot;NOVE2&quot;</span></span></code></pre></div>
</div>
</div>
<div id="join-lpi_tall2-with-other-species-lists" class="section level2">
<h2><span class="header-section-number">3.2</span> Join lpi_tall2 with other species lists</h2>
<div id="join-with-usda-plant-list" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Join with USDA plant list</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="correct-species-codes.html#cb24-1"></a><span class="co">#First, create a new column with EITHER the Symbol or the Synonym to prevent duplication when joining </span></span>
<span id="cb24-2"><a href="correct-species-codes.html#cb24-2"></a></span>
<span id="cb24-3"><a href="correct-species-codes.html#cb24-3"></a>USDAlist_oneCode&lt;-<span class="st"> </span>USDAlist <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb24-4"><a href="correct-species-codes.html#cb24-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SpeciesCode =</span> </span>
<span id="cb24-5"><a href="correct-species-codes.html#cb24-5"></a>           <span class="kw">if_else</span>(Synonym.Symbol <span class="op">==</span><span class="st"> &quot;&quot;</span>,Symbol, Synonym.Symbol)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb24-6"><a href="correct-species-codes.html#cb24-6"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>Synonym.Symbol)</span>
<span id="cb24-7"><a href="correct-species-codes.html#cb24-7"></a></span>
<span id="cb24-8"><a href="correct-species-codes.html#cb24-8"></a>lpi_USDA &lt;-<span class="st"> </span>lpi_tall2 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb24-9"><a href="correct-species-codes.html#cb24-9"></a><span class="st">  </span><span class="kw">left_join</span>(USDAlist_oneCode, <span class="dt">by =</span> <span class="st">&quot;SpeciesCode&quot;</span>) </span></code></pre></div>
</div>
<div id="join-with-statespecies" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Join with StateSpecies</h3>
<div id="prep-statespecies-to-join" class="section level4">
<h4><span class="header-section-number">3.2.2.1</span> Prep StateSpecies to join</h4>
<p>Here I need to remove all duplicate combinations of state and species code. To do so, I used anti join to find all of the records that are redundant because they match up with codes from the USDA list. This also conveniently removed all duplicates, so when I join with the lpi data, this should give me a species name and possibly an “updated code” for any listings that did not already match with the USDA list.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="correct-species-codes.html#cb25-1"></a><span class="co">#Investigate how many of the codes from the StateSpecies list show up in the USDA list w/ synonyms, and how many don&#39;t</span></span>
<span id="cb25-2"><a href="correct-species-codes.html#cb25-2"></a></span>
<span id="cb25-3"><a href="correct-species-codes.html#cb25-3"></a>USDA_StateSpecies &lt;-<span class="st"> </span>USDAlist_oneCode <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb25-4"><a href="correct-species-codes.html#cb25-4"></a><span class="st">  </span><span class="kw">inner_join</span>(StateSpecies, <span class="dt">by =</span> <span class="st">&quot;SpeciesCode&quot;</span>)</span>
<span id="cb25-5"><a href="correct-species-codes.html#cb25-5"></a></span>
<span id="cb25-6"><a href="correct-species-codes.html#cb25-6"></a><span class="co">#there are only 2,500ish records that don&#39;t match.  Let&#39;s look at those:</span></span>
<span id="cb25-7"><a href="correct-species-codes.html#cb25-7"></a></span>
<span id="cb25-8"><a href="correct-species-codes.html#cb25-8"></a>antiUSDA_StateSpecies &lt;-StateSpecies <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb25-9"><a href="correct-species-codes.html#cb25-9"></a><span class="st">  </span><span class="kw">anti_join</span>(USDAlist_oneCode, <span class="dt">by =</span> <span class="st">&quot;SpeciesCode&quot;</span>)</span>
<span id="cb25-10"><a href="correct-species-codes.html#cb25-10"></a></span>
<span id="cb25-11"><a href="correct-species-codes.html#cb25-11"></a><span class="co">#It looks like there are no duplicates anymore also!  So now I will join this to the lpi data:</span></span>
<span id="cb25-12"><a href="correct-species-codes.html#cb25-12"></a></span>
<span id="cb25-13"><a href="correct-species-codes.html#cb25-13"></a><span class="kw">unique</span>(antiUSDA_StateSpecies<span class="op">$</span>UpdatedSpeciesCode)</span></code></pre></div>
<pre><code>##  [1] &quot;&quot;        &quot;JUALN&quot;   &quot;SASP91&quot;  &quot;SPHAG2&quot;  &quot;ASROM&quot;   &quot;2FUNGI&quot;  &quot;CAMI10&quot; 
##  [8] &quot;CEIS60&quot;  &quot;CILA70&quot;  &quot;CLST7&quot;   &quot;DRINC&quot;   &quot;HUPER&quot;   &quot;OROBA&quot;   &quot;PLAL8&quot;  
## [15] &quot;SPCO70&quot;  &quot;TEMN70&quot;  &quot;AMMEI2&quot;  &quot;GALIU&quot;   &quot;RIMO2&quot;   &quot;ACTH7&quot;   &quot;LILE3&quot;  
## [22] &quot;&lt;Null&gt;&quot;  &quot;VEWO2&quot;   &quot;RIBES&quot;   &quot;MAGR2&quot;   &quot;SATR12&quot;  &quot;ANPA4&quot;   &quot;ORST2&quot;  
## [29] &quot;SACA52&quot;  &quot;FRAL2&quot;   &quot;ALTE&quot;    &quot;THAR5&quot;   &quot;COLI2&quot;   &quot;HECO26&quot;  &quot;ALPR3&quot;  
## [36] &quot;JUHO2&quot;   &quot;CRPO5&quot;   &quot;BOER4&quot;   &quot;SALIX&quot;   &quot;SCLER10&quot; &quot;SEDUM&quot;   &quot;ERIGE2&quot; 
## [43] &quot;GIIN2&quot;   &quot;HEPA11&quot;  &quot;PUTR2&quot;   &quot;RUMEX&quot;   &quot;EUPHO&quot;   &quot;PENST&quot;   &quot;POLYG4&quot; 
## [50] &quot;ARFR4&quot;   &quot;ARTRW8&quot;  &quot;ANST2&quot;   &quot;ARTRT&quot;   &quot;NOCU&quot;    &quot;AMAL2&quot;   &quot;ACMI2&quot;  
## [57] &quot;AGGL&quot;    &quot;ALLIU&quot;   &quot;AMBRO&quot;   &quot;ANTEN&quot;   &quot;ARABI2&quot;  &quot;CRAC2&quot;   &quot;DRABA&quot;  
## [64] &quot;SPORO&quot;   &quot;TAOF&quot;    &quot;TRDU&quot;    &quot;TRIFO&quot;</code></pre>
</div>
<div id="join-the-data" class="section level4">
<h4><span class="header-section-number">3.2.2.2</span> Join the data</h4>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="correct-species-codes.html#cb27-1"></a><span class="co">#Join the lpi data that was joined with the USDA codes with the state species codes that are not redundant with the usda list.  This automatically joins by SpeciesCode and SpeciesState</span></span>
<span id="cb27-2"><a href="correct-species-codes.html#cb27-2"></a><span class="co">#so, this should produce the same number of records as lpi_tall2/lpi_USDA  - and it does!</span></span>
<span id="cb27-3"><a href="correct-species-codes.html#cb27-3"></a><span class="co">#Add the column with the &quot;correct code,&quot; so basically any codes that differ between the UpdatedSpeciesCode and SpeciesCode will be replaced with the UpdatedSpeciesCode value.</span></span>
<span id="cb27-4"><a href="correct-species-codes.html#cb27-4"></a></span>
<span id="cb27-5"><a href="correct-species-codes.html#cb27-5"></a>lpi_USDA_StateSpecies&lt;-lpi_USDA <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb27-6"><a href="correct-species-codes.html#cb27-6"></a><span class="st">  </span><span class="kw">left_join</span>(antiUSDA_StateSpecies) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb27-7"><a href="correct-species-codes.html#cb27-7"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">CorrectSpeciesCode =</span></span>
<span id="cb27-8"><a href="correct-species-codes.html#cb27-8"></a>           <span class="kw">if_else</span>(UpdatedSpeciesCode <span class="op">==</span><span class="st"> &quot;&quot;</span>, SpeciesCode, UpdatedSpeciesCode, <span class="dt">missing =</span> SpeciesCode))</span></code></pre></div>
<pre><code>## Joining, by = c(&quot;SpeciesCode&quot;, &quot;SpeciesState&quot;)</code></pre>
</div>
</div>
<div id="join-with-usda-list-again" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Join with USDA list again</h3>
<p>This time I will be joining by scientific name, to try to catch any records where codes were just not right for some reason, but scientific names were.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="correct-species-codes.html#cb29-1"></a><span class="co">#I shouldn&#39;t need to do this with USDAlist_oneCode, since the Wetland AIM master list matched up 100% with the main symbol column, so that should be sufficient to get me what I want in terms of final match with the WetAIM master list. </span></span>
<span id="cb29-2"><a href="correct-species-codes.html#cb29-2"></a></span>
<span id="cb29-3"><a href="correct-species-codes.html#cb29-3"></a>USDAlist2&lt;-<span class="st"> </span>USDAlist <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb29-4"><a href="correct-species-codes.html#cb29-4"></a><span class="st">  </span><span class="kw">rename</span>(<span class="st">&quot;Symbol2&quot;</span> =<span class="st"> &quot;Symbol&quot;</span>,</span>
<span id="cb29-5"><a href="correct-species-codes.html#cb29-5"></a>         <span class="st">&quot;Sci.Name&quot;</span>=<span class="st">&quot;Scientific.Name.with.Author&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb29-6"><a href="correct-species-codes.html#cb29-6"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="st">&quot;Common.Name&quot;</span>, </span>
<span id="cb29-7"><a href="correct-species-codes.html#cb29-7"></a>         <span class="op">-</span><span class="st"> &quot;Family&quot;</span>, </span>
<span id="cb29-8"><a href="correct-species-codes.html#cb29-8"></a>         <span class="op">-</span><span class="st"> &quot;Synonym.Symbol&quot;</span>)</span>
<span id="cb29-9"><a href="correct-species-codes.html#cb29-9"></a></span>
<span id="cb29-10"><a href="correct-species-codes.html#cb29-10"></a></span>
<span id="cb29-11"><a href="correct-species-codes.html#cb29-11"></a><span class="co">#Now, join the USDA list again, joining with its scientific name column (Sci.Name) to the ScientificName column that was attached from the StateSpecies list</span></span>
<span id="cb29-12"><a href="correct-species-codes.html#cb29-12"></a></span>
<span id="cb29-13"><a href="correct-species-codes.html#cb29-13"></a>lpi_USDA2_StateSpecies&lt;-<span class="st"> </span>lpi_USDA_StateSpecies <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb29-14"><a href="correct-species-codes.html#cb29-14"></a><span class="st">  </span><span class="kw">left_join</span>(USDAlist2, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;ScientificName&quot;</span> =<span class="st"> &quot;Sci.Name&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb29-15"><a href="correct-species-codes.html#cb29-15"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">CorrectSpeciesCode2 =</span> </span>
<span id="cb29-16"><a href="correct-species-codes.html#cb29-16"></a>           <span class="kw">if_else</span>(<span class="op">!</span><span class="kw">is.na</span>(Symbol2), Symbol2, CorrectSpeciesCode)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb29-17"><a href="correct-species-codes.html#cb29-17"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>Symbol2, </span>
<span id="cb29-18"><a href="correct-species-codes.html#cb29-18"></a>         <span class="op">-</span>Symbol,</span>
<span id="cb29-19"><a href="correct-species-codes.html#cb29-19"></a>         <span class="op">-</span>CorrectSpeciesCode,</span>
<span id="cb29-20"><a href="correct-species-codes.html#cb29-20"></a>         <span class="op">-</span>UpdatedSpeciesCode,</span>
<span id="cb29-21"><a href="correct-species-codes.html#cb29-21"></a>         <span class="op">-</span>ScientificName)</span>
<span id="cb29-22"><a href="correct-species-codes.html#cb29-22"></a>  </span>
<span id="cb29-23"><a href="correct-species-codes.html#cb29-23"></a><span class="co">#No duplicates, which is a great sign!  </span></span>
<span id="cb29-24"><a href="correct-species-codes.html#cb29-24"></a></span>
<span id="cb29-25"><a href="correct-species-codes.html#cb29-25"></a><span class="co">#this adds a correct symbol column (Symbol2) directly from the USDA list that should match up to the Wetland Master list.  This actually looks like it just replaces unkown codes that were assigned a family with just the family code, so I probably didnt need to do this.  But, I don&#39;t think it hurts to have done it. </span></span>
<span id="cb29-26"><a href="correct-species-codes.html#cb29-26"></a></span>
<span id="cb29-27"><a href="correct-species-codes.html#cb29-27"></a><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="remove-duplicates.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="calculate-percent-cover-of-hydrophytic-species.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03-CorrectSpeciesCodes.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
